<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import com.skilora.framework.components.TLAvatar?>
<?import com.skilora.framework.components.TLButton?>

<!--
  ApplicationDetailsView.fxml
  Complete employer view of a candidature â€” 4 tabs:
    1. Profil candidat  (personal info / skills / experience)
    2. Candidature      (cover letter / CV / interview)
    3. Matching         (AI score + matched / missing skills)
    4. Offre d'emploi   (full job offer description)
  + persistent header + action bar
-->
<BorderPane xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.skilora.controller.recruitment.ApplicationDetailsController"
            minWidth="900" minHeight="640" prefWidth="960" prefHeight="720">

    <!-- â”€â”€ Persistent header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <top>
        <VBox styleClass="app-topbar" spacing="0">
            <padding><Insets top="16" right="24" bottom="16" left="24"/></padding>
            <HBox spacing="18" alignment="CENTER_LEFT">

                <!-- Avatar -->
                <TLAvatar fx:id="candidateAvatar"/>

                <!-- Name + job meta -->
                <VBox spacing="4" HBox.hgrow="ALWAYS">
                    <Label fx:id="candidateNameLabel" styleClass="page-title"/>
                    <Label fx:id="jobInfoLabel"       styleClass="text-muted"/>
                    <HBox spacing="20">
                        <Label fx:id="phoneLabelHdr"    styleClass="text-muted"/>
                        <Label fx:id="locationLabelHdr" styleClass="text-muted"/>
                        <Label fx:id="appliedDateLabel" styleClass="text-muted"/>
                    </HBox>
                </VBox>

                <!-- Match + Status badges (right side) -->
                <VBox spacing="6" alignment="CENTER_RIGHT" minWidth="140">
                    <Label fx:id="matchBadgeLabel"/>
                    <Label fx:id="statusBadgeLabel"/>
                    <Label fx:id="scoreLabelHdr" styleClass="text-muted"/>
                </VBox>
            </HBox>
        </VBox>
    </top>

    <!-- â”€â”€ Tabbed content â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <center>
        <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE">

            <!-- â”€â”€â”€ TAB 1 : Profil candidat â”€â”€â”€ -->
            <Tab text="ðŸ‘¤  Profil candidat">
                <ScrollPane fitToWidth="true" styleClass="transparent-bg">
                    <VBox fx:id="profileTabContent" spacing="20">
                        <padding><Insets top="24" right="28" bottom="24" left="28"/></padding>
                    </VBox>
                </ScrollPane>
            </Tab>

            <!-- â”€â”€â”€ TAB 2 : Candidature â”€â”€â”€ -->
            <Tab text="ðŸ“„  Candidature">
                <ScrollPane fitToWidth="true" styleClass="transparent-bg">
                    <VBox fx:id="applicationTabContent" spacing="20">
                        <padding><Insets top="24" right="28" bottom="24" left="28"/></padding>
                    </VBox>
                </ScrollPane>
            </Tab>

            <!-- â”€â”€â”€ TAB 3 : Matching â”€â”€â”€ -->
            <Tab text="ðŸŽ¯  Analyse matching">
                <ScrollPane fitToWidth="true" styleClass="transparent-bg">
                    <VBox fx:id="matchingTabContent" spacing="20">
                        <padding><Insets top="24" right="28" bottom="24" left="28"/></padding>
                    </VBox>
                </ScrollPane>
            </Tab>

            <!-- â”€â”€â”€ TAB 4 : Offre d'emploi â”€â”€â”€ -->
            <Tab text="ðŸ’¼  Offre d'emploi">
                <ScrollPane fitToWidth="true" styleClass="transparent-bg">
                    <VBox fx:id="offerTabContent" spacing="20">
                        <padding><Insets top="24" right="28" bottom="24" left="28"/></padding>
                    </VBox>
                </ScrollPane>
            </Tab>

        </TabPane>
    </center>

    <!-- â”€â”€ Persistent action bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <bottom>
        <HBox spacing="10" alignment="CENTER_LEFT">
            <padding><Insets top="12" right="20" bottom="12" left="20"/></padding>
            <style>-fx-background-color: -fx-card; -fx-border-color: -fx-border; -fx-border-width: 1 0 0 0;</style>

            <Button fx:id="acceptBtn"    text="âœ“ Accepter"              onAction="#handleAccept"/>
            <Button fx:id="reviewBtn"    text="ðŸ” En rÃ©vision"           onAction="#handleReview"/>
            <Button fx:id="interviewBtn" text="ðŸ“… Programmer entretien"  onAction="#handleScheduleInterview"/>
            <Button fx:id="rejectBtn"    text="âœ— Refuser"               onAction="#handleReject"/>

            <Region HBox.hgrow="ALWAYS"/>
            <Label fx:id="actionFeedbackLabel" styleClass="text-muted"/>
            <Button fx:id="closeBtn" text="Fermer" onAction="#handleClose"/>
        </HBox>
    </bottom>

</BorderPane>
