<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import com.skilora.framework.components.*?>
<?import com.skilora.framework.components.TLSeparator?>

<fx:root type="VBox" xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="com.skilora.user.controller.ProfileWizardController"
      spacing="24" fillWidth="true">
    
    <padding>
        <Insets top="32" right="32" bottom="32" left="32"/>
    </padding>

    <!-- Header -->
    <VBox spacing="8">
        <Label text="Mon Profil" styleClass="h2"/>
        <Label text="Gérez vos informations personnelles et professionnelles." styleClass="text-muted"/>
    </VBox>

    <TLSeparator/>

    <!-- Form Content -->
    <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;" VBox.vgrow="ALWAYS">
        <VBox spacing="24">

            <!-- Profile Photo Section -->
            <VBox spacing="16">
                <Label text="Photo de Profil" styleClass="h4"/>
                <HBox spacing="20" alignment="CENTER_LEFT">
                    <TLAvatar fx:id="photoAvatar"/>
                    <VBox spacing="8" HBox.hgrow="ALWAYS">
                        <HBox spacing="12" alignment="CENTER_LEFT">
                            <TLButton fx:id="uploadPhotoBtn" text="Changer la photo" onAction="#handleUploadPhoto"/>
                            <TLButton fx:id="removePhotoBtn" text="Supprimer" variant="GHOST" onAction="#handleRemovePhoto"/>
                        </HBox>
                        <Label fx:id="photoStatusLabel" text="PNG, JPG, GIF, WebP &#x2022; Max 5 Mo" styleClass="text-muted, text-xs"/>
                    </VBox>
                </HBox>
            </VBox>

            <TLSeparator/>
            
            <!-- Personal Info Section -->
            <VBox spacing="16">
                <Label text="Informations Personnelles" styleClass="h4"/>
                
                <GridPane hgap="16" vgap="16">
                    <columnConstraints>
                        <ColumnConstraints percentWidth="50"/>
                        <ColumnConstraints percentWidth="50"/>
                    </columnConstraints>
                    
                    <TLTextField fx:id="firstNameField" label="Prénom" promptText="Ex: Ahmed" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                    <TLTextField fx:id="lastNameField" label="Nom" promptText="Ex: Ben Ali" GridPane.columnIndex="1" GridPane.rowIndex="0"/>
                    
                    <TLTextField fx:id="headlineField" label="Titre / Poste actuel" promptText="Ex: Développeur Fullstack" GridPane.columnSpan="2" GridPane.rowIndex="1"/>
                </GridPane>
                
                <VBox spacing="8">
                    <Label text="Bio" styleClass="text-sm" style="-fx-font-weight: bold;"/>
                    <TextArea fx:id="bioArea" promptText="Parlez-nous de vous..." prefRowCount="4" wrapText="true" styleClass="text-area"/>
                </VBox>
            </VBox>

            <TLSeparator/>

            <!-- Contact Info -->
            <VBox spacing="16">
                <Label text="Contact" styleClass="h4"/>
                <GridPane hgap="16" vgap="16">
                     <columnConstraints>
                        <ColumnConstraints percentWidth="50"/>
                        <ColumnConstraints percentWidth="50"/>
                    </columnConstraints>
                    
                    <TLTextField fx:id="emailField" label="Email" disable="true" GridPane.columnIndex="0"/>
                    <TLTextField fx:id="phoneField" label="Téléphone" promptText="+216" GridPane.columnIndex="1"/>
                    <TLTextField fx:id="locationField" label="Ville" promptText="Ex: Tunis" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                    <TLTextField fx:id="websiteField" label="Site Web / Portfolio" promptText="https://" GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                </GridPane>
            </VBox>

            <TLSeparator/>

            <!-- Biometric Section -->
            <VBox spacing="16">
                <Label text="Sécurité Biométrique" styleClass="h4"/>
                <Label text="Configurez la reconnaissance faciale pour une connexion rapide et sécurisée." styleClass="text-muted"/>
                
                <HBox spacing="16" alignment="CENTER_LEFT">
                    <VBox spacing="8" HBox.hgrow="ALWAYS">
                        <Label fx:id="biometricStatusLabel" text="Statut: Non configuré" styleClass="text-sm"/>
                    </VBox>
                    <TLButton fx:id="biometricBtn" text="Configurer la reconnaissance faciale" onAction="#handleBiometricSetup"/>
                </HBox>
            </VBox>

        </VBox>
    </ScrollPane>

    <TLSeparator/>

    <!-- Actions -->
    <HBox fx:id="actionsBar" spacing="16" alignment="CENTER_RIGHT" visible="false" managed="false">
        <Label fx:id="statusLabel" styleClass="text-muted"/>
        <Region HBox.hgrow="ALWAYS"/>
        <TLButton fx:id="cancelBtn" text="Annuler" variant="OUTLINE" onAction="#handleCancel"/>
        <TLButton fx:id="saveBtn" text="Enregistrer les modifications" onAction="#handleSave"/>
    </HBox>

</fx:root>
